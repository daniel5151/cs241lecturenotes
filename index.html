<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>cs241lecturenotes.html</title>
  <meta name="generator" content="Haroopad 0.13.1" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>div.oembedall-githubrepos{border:1px solid #DDD;border-radius:4px;list-style-type:none;margin:0 0 10px;padding:8px 10px 0;font:13.34px/1.4 helvetica,arial,freesans,clean,sans-serif;width:452px;background-color:#fff}div.oembedall-githubrepos .oembedall-body{background:-moz-linear-gradient(center top,#FAFAFA,#EFEFEF);background:-webkit-gradient(linear,left top,left bottom,from(#FAFAFA),to(#EFEFEF));border-bottom-left-radius:4px;border-bottom-right-radius:4px;border-top:1px solid #EEE;margin-left:-10px;margin-top:8px;padding:5px 10px;width:100%}div.oembedall-githubrepos h3{font-size:14px;margin:0;padding-left:18px;white-space:nowrap}div.oembedall-githubrepos p.oembedall-description{color:#444;font-size:12px;margin:0 0 3px}div.oembedall-githubrepos p.oembedall-updated-at{color:#888;font-size:11px;margin:0}div.oembedall-githubrepos ul.oembedall-repo-stats{border:none;float:right;font-size:11px;font-weight:700;padding-left:15px;position:relative;z-index:5;margin:0}div.oembedall-githubrepos ul.oembedall-repo-stats li{border:none;color:#666;display:inline-block;list-style-type:none;margin:0!important}div.oembedall-githubrepos ul.oembedall-repo-stats li a{background-color:transparent;border:none;color:#666!important;background-position:5px -2px;background-repeat:no-repeat;border-left:1px solid #DDD;display:inline-block;height:21px;line-height:21px;padding:0 5px 0 23px}div.oembedall-githubrepos ul.oembedall-repo-stats li:first-child a{border-left:medium none;margin-right:-3px}div.oembedall-githubrepos ul.oembedall-repo-stats li a:hover{background:5px -27px no-repeat #4183C4;color:#FFF!important;text-decoration:none}div.oembedall-githubrepos ul.oembedall-repo-stats li:first-child a:hover{border-bottom-left-radius:3px;border-top-left-radius:3px}ul.oembedall-repo-stats li:last-child a:hover{border-bottom-right-radius:3px;border-top-right-radius:3px}span.oembedall-closehide{background-color:#aaa;border-radius:2px;cursor:pointer;margin-right:3px}div.oembedall-container{margin-top:5px;text-align:left}.oembedall-ljuser{font-weight:700}.oembedall-ljuser img{vertical-align:bottom;border:0;padding-right:1px}.oembedall-stoqembed{border-bottom:1px dotted #999;float:left;overflow:hidden;width:730px;line-height:1;background:#FFF;color:#000;font-family:Arial,Liberation Sans,DejaVu Sans,sans-serif;font-size:80%;text-align:left;margin:0;padding:0}.oembedall-stoqembed a{color:#07C;text-decoration:none;margin:0;padding:0}.oembedall-stoqembed a:hover{text-decoration:underline}.oembedall-stoqembed a:visited{color:#4A6B82}.oembedall-stoqembed h3{font-family:Trebuchet MS,Liberation Sans,DejaVu Sans,sans-serif;font-size:130%;font-weight:700;margin:0;padding:0}.oembedall-stoqembed .oembedall-reputation-score{color:#444;font-size:120%;font-weight:700;margin-right:2px}.oembedall-stoqembed .oembedall-user-info{height:35px;width:185px}.oembedall-stoqembed .oembedall-user-info .oembedall-user-gravatar32{float:left;height:32px;width:32px}.oembedall-stoqembed .oembedall-user-info .oembedall-user-details{float:left;margin-left:5px;overflow:hidden;white-space:nowrap;width:145px}.oembedall-stoqembed .oembedall-question-hyperlink{font-weight:700}.oembedall-stoqembed .oembedall-stats{background:#EEE;margin:0 0 0 7px;padding:4px 7px 6px;width:58px}.oembedall-stoqembed .oembedall-statscontainer{float:left;margin-right:8px;width:86px}.oembedall-stoqembed .oembedall-votes{color:#555;padding:0 0 7px;text-align:center}.oembedall-stoqembed .oembedall-vote-count-post{font-size:240%;color:#808185;display:block;font-weight:700}.oembedall-stoqembed .oembedall-views{color:#999;padding-top:4px;text-align:center}.oembedall-stoqembed .oembedall-status{margin-top:-3px;padding:4px 0;text-align:center;background:#75845C;color:#FFF}.oembedall-stoqembed .oembedall-status strong{color:#FFF;display:block;font-size:140%}.oembedall-stoqembed .oembedall-summary{float:left;width:635px}.oembedall-stoqembed .oembedall-excerpt{line-height:1.2;margin:0;padding:0 0 5px}.oembedall-stoqembed .oembedall-tags{float:left;line-height:18px}.oembedall-stoqembed .oembedall-tags a:hover{text-decoration:none}.oembedall-stoqembed .oembedall-post-tag{background-color:#E0EAF1;border-bottom:1px solid #3E6D8E;border-right:1px solid #7F9FB6;color:#3E6D8E;font-size:90%;line-height:2.4;margin:2px 2px 2px 0;padding:3px 4px;text-decoration:none;white-space:nowrap}.oembedall-stoqembed .oembedall-post-tag:hover{background-color:#3E6D8E;border-bottom:1px solid #37607D;border-right:1px solid #37607D;color:#E0EAF1}.oembedall-stoqembed .oembedall-fr{float:right}.oembedall-stoqembed .oembedall-statsarrow{background-image:url(http://cdn.sstatic.net/stackoverflow/img/sprites.png?v=3);background-repeat:no-repeat;overflow:hidden;background-position:0 -435px;float:right;height:13px;margin-top:12px;width:7px}.oembedall-facebook1{border:1px solid #1A3C6C;padding:0;font:13.34px/1.4 verdana;width:500px}.oembedall-facebook2{background-color:#627add}.oembedall-facebook2 a{color:#e8e8e8;text-decoration:none}.oembedall-facebookBody{background-color:#fff;vertical-align:top;padding:5px}.oembedall-facebookBody .contents{display:inline-block;width:100%}.oembedall-facebookBody div img{float:left;margin-right:5px}div.oembedall-lanyard{-webkit-box-shadow:none;-webkit-transition-delay:0s;-webkit-transition-duration:.4000000059604645s;-webkit-transition-property:width;-webkit-transition-timing-function:cubic-bezier(0.42,0,.58,1);background-attachment:scroll;background-clip:border-box;background-color:transparent;background-image:none;background-origin:padding-box;border-width:0;box-shadow:none;color:#112644;display:block;float:left;font-family:'Trebuchet MS',Trebuchet,sans-serif;font-size:16px;height:253px;line-height:19px;margin:0;max-width:none;min-height:0;outline:#112644 0;overflow-x:visible;overflow-y:visible;padding:0;position:relative;text-align:left;vertical-align:baseline;width:804px}div.oembedall-lanyard .tagline{font-size:1.5em}div.oembedall-lanyard .wrapper{overflow:hidden;clear:both}div.oembedall-lanyard .split{float:left;display:inline}div.oembedall-lanyard .prominent-place .flag:active,div.oembedall-lanyard .prominent-place .flag:focus,div.oembedall-lanyard .prominent-place .flag:hover,div.oembedall-lanyard .prominent-place .flag:link,div.oembedall-lanyard .prominent-place .flag:visited{float:left;display:block;width:48px;height:48px;position:relative;top:-5px;margin-right:10px}div.oembedall-lanyard .place-context{font-size:.889em}div.oembedall-lanyard .prominent-place .sub-place{display:block}div.oembedall-lanyard .prominent-place{font-size:1.125em;line-height:1.1em;font-weight:400}div.oembedall-lanyard .main-date{color:#8CB4E0;font-weight:700;line-height:1.1}div.oembedall-lanyard .first{width:48.57%;margin:0 0 0 2.857%}.mermaid .label{color:#333}.node circle,.node polygon,.node rect{fill:#cde498;stroke:#13540c;stroke-width:1px}.edgePath .path{stroke:green;stroke-width:1.5px}.cluster rect{fill:#cdffb2;rx:40;stroke:#6eaa49;stroke-width:1px}.cluster text{fill:#333}.actor{stroke:#13540c;fill:#cde498}text.actor{fill:#000;stroke:none}.actor-line{stroke:grey}.messageLine0{stroke-width:1.5;stroke-dasharray:"2 2";marker-end:"url(#arrowhead)";stroke:#333}.messageLine1{stroke-width:1.5;stroke-dasharray:"2 2";stroke:#333}#arrowhead{fill:#333}#crosshead path{fill:#333!important;stroke:#333!important}.messageText{fill:#333;stroke:none}.labelBox{stroke:#326932;fill:#cde498}.labelText,.loopText{fill:#000;stroke:none}.loopLine{stroke-width:2;stroke-dasharray:"2 2";marker-end:"url(#arrowhead)";stroke:#326932}.note{stroke:#6eaa49;fill:#fff5ad}.noteText{fill:#000;stroke:none;font-family:'trebuchet ms',verdana,arial;font-size:14px}.section{stroke:none;opacity:.2}.section0,.section2{fill:#6eaa49}.section1,.section3{fill:#fff;opacity:.2}.sectionTitle0,.sectionTitle1,.sectionTitle2,.sectionTitle3{fill:#333}.sectionTitle{text-anchor:start;font-size:11px;text-height:14px}.grid .tick{stroke:lightgrey;opacity:.3;shape-rendering:crispEdges}.grid path{stroke-width:0}.today{fill:none;stroke:red;stroke-width:2px}.task{stroke-width:2}.taskText{text-anchor:middle;font-size:11px}.taskTextOutsideRight{fill:#000;text-anchor:start;font-size:11px}.taskTextOutsideLeft{fill:#000;text-anchor:end;font-size:11px}.taskText0,.taskText1,.taskText2,.taskText3{fill:#fff}.task0,.task1,.task2,.task3{fill:#487e3a;stroke:#13540c}.taskTextOutside0,.taskTextOutside1,.taskTextOutside2,.taskTextOutside3{fill:#000}.active0,.active1,.active2,.active3{fill:#cde498;stroke:#13540c}.activeText0,.activeText1,.activeText2,.activeText3{fill:#000!important}.done0,.done1,.done2,.done3{stroke:grey;fill:lightgrey;stroke-width:2}.doneText0,.doneText1,.doneText2,.doneText3{fill:#000!important}.crit0,.crit1,.crit2,.crit3{stroke:#f88;fill:red;stroke-width:2}.activeCrit0,.activeCrit1,.activeCrit2,.activeCrit3{stroke:#f88;fill:#cde498;stroke-width:2}.doneCrit0,.doneCrit1,.doneCrit2,.doneCrit3{stroke:#f88;fill:lightgrey;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}.activeCritText0,.activeCritText1,.activeCritText2,.activeCritText3,.doneCritText0,.doneCritText1,.doneCritText2,.doneCritText3{fill:#000!important}.titleText{text-anchor:middle;font-size:18px;fill:#000}text{font-family:'trebuchet ms',verdana,arial;font-size:14px}html{height:100%}body{margin:0!important;padding:5px 20px 26px!important;background-color:#fff;font-family:"Lucida Grande","Segoe UI","Apple SD Gothic Neo","Malgun Gothic","Lucida Sans Unicode",Helvetica,Arial,sans-serif;font-size:.9em;overflow-x:hidden;overflow-y:auto}br,h1,h2,h3,h4,h5,h6{clear:both}hr.page{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x;border:0;height:3px;padding:0}hr.underscore{border-top-style:dashed!important}body >:first-child{margin-top:0!important}img.plugin{box-shadow:0 1px 3px rgba(0,0,0,.1);border-radius:3px}iframe{border:0}figure{-webkit-margin-before:0;-webkit-margin-after:0;-webkit-margin-start:0;-webkit-margin-end:0}kbd{border:1px solid #aaa;-moz-border-radius:2px;-webkit-border-radius:2px;border-radius:2px;-moz-box-shadow:1px 2px 2px #ddd;-webkit-box-shadow:1px 2px 2px #ddd;box-shadow:1px 2px 2px #ddd;background-color:#f9f9f9;background-image:-moz-linear-gradient(top,#eee,#f9f9f9,#eee);background-image:-o-linear-gradient(top,#eee,#f9f9f9,#eee);background-image:-webkit-linear-gradient(top,#eee,#f9f9f9,#eee);background-image:linear-gradient(top,#eee,#f9f9f9,#eee);padding:1px 3px;font-family:inherit;font-size:.85em}.oembeded .oembed_photo{display:inline-block}img[data-echo]{margin:25px 0;width:100px;height:100px;background:url(../img/ajax.gif) center center no-repeat #fff}.spinner{display:inline-block;width:10px;height:10px;margin-bottom:-.1em;border:2px solid rgba(0,0,0,.5);border-top-color:transparent;border-radius:100%;-webkit-animation:spin 1s infinite linear;animation:spin 1s infinite linear}.spinner:after{content:'';display:block;width:0;height:0;position:absolute;top:-6px;left:0;border:4px solid transparent;border-bottom-color:rgba(0,0,0,.5);-webkit-transform:rotate(45deg);transform:rotate(45deg)}@-webkit-keyframes spin{to{-webkit-transform:rotate(360deg)}}@keyframes spin{to{transform:rotate(360deg)}}p.toc{margin:0!important}p.toc ul{padding-left:10px}p.toc>ul{padding:10px;margin:0 10px;display:inline-block;border:1px solid #ededed;border-radius:5px}p.toc li,p.toc ul{list-style-type:none}p.toc li{width:100%;padding:0;overflow:hidden}p.toc li a::after{content:"."}p.toc li a:before{content:"• "}p.toc h5{text-transform:uppercase}p.toc .title{float:left;padding-right:3px}p.toc .number{margin:0;float:right;padding-left:3px;background:#fff;display:none}input.task-list-item{margin-left:-1.62em}.markdown{font-family:"Hiragino Sans GB","Microsoft YaHei",STHeiti,SimSun,"Lucida Grande","Lucida Sans Unicode","Lucida Sans",'Segoe UI',AppleSDGothicNeo-Medium,'Malgun Gothic',Verdana,Tahoma,sans-serif;padding:20px}.markdown a{text-decoration:none;vertical-align:baseline}.markdown a:hover{text-decoration:underline}.markdown h1{font-size:2.2em;font-weight:700;margin:1.5em 0 1em}.markdown h2{font-size:1.8em;font-weight:700;margin:1.275em 0 .85em}.markdown h3{font-size:1.6em;font-weight:700;margin:1.125em 0 .75em}.markdown h4{font-size:1.4em;font-weight:700;margin:.99em 0 .66em}.markdown h5{font-size:1.2em;font-weight:700;margin:.855em 0 .57em}.markdown h6{font-size:1em;font-weight:700;margin:.75em 0 .5em}.markdown h1+p,.markdown h1:first-child,.markdown h2+p,.markdown h2:first-child,.markdown h3+p,.markdown h3:first-child,.markdown h4+p,.markdown h4:first-child,.markdown h5+p,.markdown h5:first-child,.markdown h6+p,.markdown h6:first-child{margin-top:0}.markdown hr{border:1px solid #ccc}.markdown p{margin:1em 0;word-wrap:break-word}.markdown ol{list-style-type:decimal}.markdown li{display:list-item;line-height:1.4em}.markdown blockquote{margin:1em 20px}.markdown blockquote>:first-child{margin-top:0}.markdown blockquote>:last-child{margin-bottom:0}.markdown blockquote cite:before{content:'\2014 \00A0'}.markdown .code{border-radius:3px;word-wrap:break-word}.markdown pre{border-radius:3px;word-wrap:break-word;border:1px solid #ccc;overflow:auto;padding:.5em}.markdown pre code{border:0;display:block}.markdown pre>code{font-family:Consolas,Inconsolata,Courier,monospace;font-weight:700;white-space:pre;margin:0}.markdown code{border-radius:3px;word-wrap:break-word;border:1px solid #ccc;padding:0 5px;margin:0 2px}.markdown img{max-width:100%}.markdown mark{color:#000;background-color:#fcf8e3}.markdown table{padding:0;border-collapse:collapse;border-spacing:0;margin-bottom:16px}.markdown table tr td,.markdown table tr th{border:1px solid #ccc;margin:0;padding:6px 13px}.markdown table tr th{font-weight:700}.markdown table tr th>:first-child{margin-top:0}.markdown table tr th>:last-child{margin-bottom:0}.markdown table tr td>:first-child{margin-top:0}.markdown table tr td>:last-child{margin-bottom:0}.github{padding:20px;font-family:"Helvetica Neue",Helvetica,"Hiragino Sans GB","Microsoft YaHei",STHeiti,SimSun,"Segoe UI",AppleSDGothicNeo-Medium,'Malgun Gothic',Arial,freesans,sans-serif;font-size:15px;background:#fff;line-height:1.6;-webkit-font-smoothing:antialiased}.github a{color:#3269a0}.github a:hover{color:#4183c4}.github h2{border-bottom:1px solid #e6e6e6;line-height:1.6}.github h6{color:#777}.github hr{border:1px solid #e6e6e6}.github pre>code{font-size:.9em;font-family:Consolas,Inconsolata,Courier,monospace}.github blockquote>code,.github h1>code,.github h2>code,.github h3>code,.github h4>code,.github h5>code,.github h6>code,.github li>code,.github p>code,.github td>code{background-color:rgba(0,0,0,.07);font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;font-size:85%;padding:.2em .5em;border:0}.github blockquote{border-left:4px solid #e6e6e6;padding:0 15px;font-style:italic}.github table{background-color:#fafafa}.github table tr td,.github table tr th{border:1px solid #e6e6e6}.github table tr:nth-child(2n){background-color:#f2f2f2}.hljs{display:block;overflow-x:auto;padding:.5em;background:#fdf6e3;color:#657b83;-webkit-text-size-adjust:none}.diff .hljs-header,.hljs-comment,.hljs-doctype,.hljs-javadoc,.hljs-pi,.lisp .hljs-string{color:#93a1a1}.css .hljs-tag,.hljs-addition,.hljs-keyword,.hljs-request,.hljs-status,.hljs-winutils,.method,.nginx .hljs-title{color:#859900}.hljs-command,.hljs-dartdoc,.hljs-hexcolor,.hljs-link_url,.hljs-number,.hljs-phpdoc,.hljs-regexp,.hljs-rules .hljs-value,.hljs-string,.hljs-tag .hljs-value,.tex .hljs-formula{color:#2aa198}.css .hljs-function,.hljs-built_in,.hljs-chunk,.hljs-decorator,.hljs-id,.hljs-identifier,.hljs-localvars,.hljs-title,.vhdl .hljs-literal{color:#268bd2}.hljs-attribute,.hljs-class .hljs-title,.hljs-constant,.hljs-link_reference,.hljs-parent,.hljs-type,.hljs-variable,.lisp .hljs-body,.smalltalk .hljs-number{color:#b58900}.css .hljs-pseudo,.diff .hljs-change,.hljs-attr_selector,.hljs-cdata,.hljs-header,.hljs-pragma,.hljs-preprocessor,.hljs-preprocessor .hljs-keyword,.hljs-shebang,.hljs-special,.hljs-subst,.hljs-symbol,.hljs-symbol .hljs-string{color:#cb4b16}.hljs-deletion,.hljs-important{color:#dc322f}.hljs-link_label{color:#6c71c4}.tex .hljs-formula{background:#eee8d5}.MathJax_Hover_Frame{border-radius:.25em;-webkit-border-radius:.25em;-moz-border-radius:.25em;-khtml-border-radius:.25em;box-shadow:0 0 15px #83A;-webkit-box-shadow:0 0 15px #83A;-moz-box-shadow:0 0 15px #83A;-khtml-box-shadow:0 0 15px #83A;border:1px solid #A6D!important;display:inline-block;position:absolute}.MathJax_Hover_Arrow{position:absolute;width:15px;height:11px;cursor:pointer}#MathJax_About{position:fixed;left:50%;width:auto;text-align:center;border:3px outset;padding:1em 2em;background-color:#DDD;color:#000;cursor:default;font-family:message-box;font-size:120%;font-style:normal;text-indent:0;text-transform:none;line-height:normal;letter-spacing:normal;word-spacing:normal;word-wrap:normal;white-space:nowrap;float:none;z-index:201;border-radius:15px;-webkit-border-radius:15px;-moz-border-radius:15px;-khtml-border-radius:15px;box-shadow:0 10px 20px gray;-webkit-box-shadow:0 10px 20px gray;-moz-box-shadow:0 10px 20px gray;-khtml-box-shadow:0 10px 20px gray;filter:progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}.MathJax_Menu{position:absolute;background-color:#fff;color:#000;width:auto;padding:5px 0;border:1px solid #CCC;margin:0;cursor:default;font:menu;text-align:left;text-indent:0;text-transform:none;line-height:normal;letter-spacing:normal;word-spacing:normal;word-wrap:normal;white-space:nowrap;float:none;z-index:201;border-radius:5px;-webkit-border-radius:5px;-moz-border-radius:5px;-khtml-border-radius:5px;box-shadow:0 10px 20px gray;-webkit-box-shadow:0 10px 20px gray;-moz-box-shadow:0 10px 20px gray;-khtml-box-shadow:0 10px 20px gray;filter:progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}.MathJax_MenuItem{padding:1px 2em;background:0 0}.MathJax_MenuArrow{position:absolute;right:.5em;color:#666}.MathJax_MenuActive .MathJax_MenuArrow{color:#fff}.MathJax_MenuArrow.RTL{left:.5em;right:auto}.MathJax_MenuCheck{position:absolute;left:.7em}.MathJax_MenuCheck.RTL{right:.7em;left:auto}.MathJax_MenuRadioCheck{position:absolute;left:.7em}.MathJax_MenuRadioCheck.RTL{right:.7em;left:auto}.MathJax_MenuLabel{padding:1px 2em 3px 1.33em;font-style:italic}.MathJax_MenuRule{border-top:1px solid #DDD;margin:4px 3px}.MathJax_MenuDisabled{color:GrayText}.MathJax_MenuActive{background-color:#606872;color:#fff}.MathJax_Menu_Close{position:absolute;width:31px;height:31px;top:-15px;left:-15px}#MathJax_Zoom{position:absolute;background-color:#F0F0F0;overflow:auto;display:block;z-index:301;padding:.5em;border:1px solid #000;margin:0;font-weight:400;font-style:normal;text-align:left;text-indent:0;text-transform:none;line-height:normal;letter-spacing:normal;word-spacing:normal;word-wrap:normal;white-space:nowrap;float:none;box-shadow:5px 5px 15px #AAA;-webkit-box-shadow:5px 5px 15px #AAA;-moz-box-shadow:5px 5px 15px #AAA;-khtml-box-shadow:5px 5px 15px #AAA;filter:progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}#MathJax_ZoomOverlay{position:absolute;left:0;top:0;z-index:300;display:inline-block;width:100%;height:100%;border:0;padding:0;margin:0;background-color:#fff;opacity:0;filter:alpha(opacity=0)}#MathJax_ZoomFrame{position:relative;display:inline-block;height:0;width:0}#MathJax_ZoomEventTrap{position:absolute;left:0;top:0;z-index:302;display:inline-block;border:0;padding:0;margin:0;background-color:#fff;opacity:0;filter:alpha(opacity=0)}.MathJax_Preview{color:#888}#MathJax_Message{position:fixed;left:1px;bottom:2px;background-color:#E6E6E6;border:1px solid #959595;margin:0;padding:2px 8px;z-index:102;color:#000;font-size:80%;width:auto;white-space:nowrap}#MathJax_MSIE_Frame{position:absolute;top:0;left:0;width:0;z-index:101;border:0;margin:0;padding:0}.MathJax_Error{color:#C00;font-style:italic}.MathJax_Display{text-align:center;margin:1em 0;position:relative;display:block!important;text-indent:0;max-width:none;max-height:none;min-width:0;min-height:0;width:100%}.MathJax .merror{background-color:#FF8;color:#C00;border:1px solid #C00;padding:1px 3px;font-style:normal;font-size:90%}.MathJax .MJX-monospace{font-family:monospace}.MathJax .MJX-sans-serif{font-family:sans-serif}#MathJax_Tooltip{background-color:InfoBackground;color:InfoText;border:1px solid #000;box-shadow:2px 2px 5px #AAA;-webkit-box-shadow:2px 2px 5px #AAA;-moz-box-shadow:2px 2px 5px #AAA;-khtml-box-shadow:2px 2px 5px #AAA;filter:progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true');padding:3px 4px;z-index:401;position:absolute;left:0;top:0;width:auto;height:auto;display:none}.MathJax{display:inline;font-style:normal;font-weight:400;line-height:normal;font-size:100%;font-size-adjust:none;text-indent:0;text-align:left;text-transform:none;letter-spacing:normal;word-spacing:normal;word-wrap:normal;white-space:nowrap;float:none;direction:ltr;max-width:none;max-height:none;min-width:0;min-height:0;border:0;padding:0;margin:0}.MathJax a,.MathJax img,.MathJax nobr{border:0;padding:0;margin:0;max-width:5000em;max-height:5000em;min-width:0;min-height:0;vertical-align:0;line-height:normal;text-decoration:none}img.MathJax_strut{border:0!important;padding:0!important;margin:0!important;vertical-align:0!important}.MathJax span{display:inline;position:static;border:0;padding:0;margin:0;vertical-align:0;line-height:normal;text-decoration:none}.MathJax nobr{white-space:nowrap!important}.MathJax img{display:inline!important;float:none!important}.MathJax *{transition:none;-webkit-transition:none;-moz-transition:none;-ms-transition:none;-o-transition:none}.MathJax_Processing{visibility:hidden;position:fixed;width:0;height:0;overflow:hidden}.MathJax_Processed{display:none!important}.MathJax_ExBox{display:block!important;overflow:hidden;width:1px;height:60ex;min-height:0;max-height:none}.MathJax .MathJax_EmBox{display:block!important;overflow:hidden;width:1px;height:60em;min-height:0;max-height:none}.MathJax .MathJax_HitBox{cursor:text;background:#fff;opacity:0;filter:alpha(opacity=0)}#MathJax_Tooltip *,.MathJax .MathJax_HitBox *{filter:none;opacity:1;background:0 0}@font-face{font-family:MathJax_Blank;src:url(about:blank)}.MathJax .noError{font-size:90%;text-align:left;color:#000;padding:1px 3px;border:1px solid}footer{position:fixed;font-size:.8em;text-align:right;bottom:0;margin-left:-25px;height:20px;width:100%}</style>
</head>
<body class="markdown github">
<h1 id="cs-241---foundation-of-sequential-programs"><a name="cs-241---foundation-of-sequential-programs" href="#cs-241---foundation-of-sequential-programs"></a>CS-241 - Foundation of Sequential Programs</h1><h2 id="fall-2016"><a name="fall-2016" href="#fall-2016"></a>Fall 2016</h2><h3 id="notes-by-daniel-prilik---se-2020"><a name="notes-by-daniel-prilik---se-2020" href="#notes-by-daniel-prilik---se-2020"></a>Notes by Daniel Prilik - SE 2020</h3><h1 id="instructor-info"><a name="instructor-info" href="#instructor-info"></a>Instructor info</h1><ul>
<li>Matt Crane<ul>
<li>Email: matt.crane@uwaterloo.ca</li><li>Office Hours: DC2555F 3:00 - 4:00pm Tues / Thurs</li></ul>
</li><li>Troy Vasiga<ul>
<li>Email: troy.vasiga@uwaterloo.ca</li><li>Office Hours: DC3112 12:00 - 1:30pm Tues / Thurs</li></ul>
</li><li>ISA: Max Bardakov <ul>
<li>Email: cs241@uwaterloo.ca</li></ul>
</li></ul><h1 id="lecture-1"><a name="lecture-1" href="#lecture-1"></a>Lecture 1</h1><p>Oh boy! Here we go again!</p><h2 id="bookeeping"><a name="bookeeping" href="#bookeeping"></a>Bookeeping</h2><p>The course website is www.student.cs.uwaterloo.ca/~cs241/</p><ul>
<li>Syllabus</li><li>Announcements</li><li>Everyhing else!</li></ul><p>A note about Assignments:</p><ul>
<li>Start early!</li><li>Don’t fall behind!</li><li>In total, there are 10 assignments, each with ~9 subparts, so ~100 things to submit</li></ul><p>The course uses our favorite program: <em>Marmoset!</em></p><ul>
<li>This time around though, there are Release Tokens, that give you 3 attempts per 12h to test your programs</li></ul><p>Marking breakdown:</p><ul>
<li>25% Assignments - Due Thursdays at 7:00pm</li><li>25% Midterm - Wed Oct. 26th from 7:00-8:50pm</li><li>50% Final (must pass) - 2.5h sometime in December</li></ul><h2 id="idyllic-intro"><a name="idyllic-intro" href="#idyllic-intro"></a>Idyllic Intro</h2><p>So what is the purpose of this course:</p><ul>
<li>To learn</li><li>To Meta-think</li><li>To write a program, that reads a program, that outputs a program.<ul>
<li>Inception. BWUHHH</li></ul>
</li></ul><p>By the end of this course, we will know what <em>really</em> happens when you compile and run a program, and there will be little to no mystery about what happens when you run a program.</p><h2 id="technical-intro"><a name="technical-intro" href="#technical-intro"></a>Technical Intro</h2><p>In this course, all a computer is a <strong>CPU</strong> and <strong>RAM</strong>.</p><p>A CPU <strong>Controls and Manipulates the Data</strong>, and the RAM is just a bunch of <strong>addressed “boxes” that store Data</strong>.</p><h2 id="binary-data"><a name="binary-data" href="#binary-data"></a>Binary Data</h2><p>All data is at a basic level is a sequence of 1s and 0s, or Bits</p><p>There are many interpretations for what a specific sequence of bits means (i.e: numbers, ascii, etc…), and there is no one “correct” interpretation.</p><h2 id="machine-language"><a name="machine-language" href="#machine-language"></a>Machine Language</h2><p>There are certain sequences of bits that do in-fact have one specific meaning, or at least they do when it comes to how the machine interprets them. Depending on the Achitecture of the machine (i.e: Intel/Motorola, 32/64bit, etc…) there may be different bit sequences that mean the same things.</p><p>These codes are great for machines, super easy, just 0 = off, 1 = off, but they SUCKS for humans.</p><h2 id="assembly"><a name="assembly" href="#assembly"></a>Assembly</h2><p><strong>Assembly</strong> on the other hand, sucks less for Humans.</p><p>It is a simple, textual representation of machine language. It is more human readable, and makes development less, shall we say, absolutely terrible.</p><p>A big plus of assembly is that is it pretty easy to translate Assembly to Machine Code. Assembly is just an <em>Abstraction</em>.</p><h2 id="assembler"><a name="assembler" href="#assembler"></a>Assembler</h2><p>The <strong>Assembler</strong> is the program that preforms the translation from Assembly to Machine Code. </p><h2 id="back-to-the-basics:-bits"><a name="back-to-the-basics:-bits" href="#back-to-the-basics:-bits"></a>Back to the Basics: Bits</h2><p>What is a Bit exactly?</p><p>Well, it is just a value that can have 2 states, either 1, or 0. That’s it.</p><p>The nice thing is that a <strong>sequence of bits</strong> can describle a lot of different value.</p><ul>
<li>2 bits can have 4 arrangements</li><li>3 bits can have 8 arrangements</li><li>n bits can have 2^n arrangements!</li></ul><p>We can use Bits to describle certain useful “types”:</p><h3 id="integers"><a name="integers" href="#integers"></a>Integers</h3><h4 id="unsigned-integers"><a name="unsigned-integers" href="#unsigned-integers"></a>Unsigned integers</h4><p>Each sequence is just a direct representation of a number in base 2.</p><h4 id="two's-compliment"><a name="two's-compliment" href="#two's-compliment"></a>Two’s Compliment</h4><p>What if we want Negative Numbers? Well, then we have to use a more complicated code, called 2s compliemnt.</p><p>To get 2s compliemnt, we</p><ol>
<li>write the absolute value of a number in banary</li><li>Negate the bits (to get 1s compliment)</li><li>Add 1</li></ol><p><strong>So, With 3 bits, we can have the following interpretations for integers…</strong> </p><table>
<thead>
<tr>
<th>Binary</th>
<th>Decimal</th>
<th>2’s compliment</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>000</code></td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td><code>001</code></td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td><code>010</code></td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td><code>011</code></td>
<td>3</td>
<td>3 </td>
</tr>
<tr>
<td><code>100</code></td>
<td>4</td>
<td>-4</td>
</tr>
<tr>
<td><code>101</code></td>
<td>5</td>
<td>-3</td>
</tr>
<tr>
<td><code>110</code></td>
<td>6</td>
<td>-2</td>
</tr>
<tr>
<td><code>111</code></td>
<td>7</td>
<td>-1</td>
</tr>
</tbody>
</table><p>** Notice that in 2s compliment, the left-most bit tells us if it is negative or not…</p><p>To hammer in this point, consider <code>1010</code>.<br>What does it mean?<br>Well, nothing really, not until we know what type is should represent.<br>It is <code>10</code> if it’s an unsigned number, but it’s <code>-6</code> in 2s compliment </p><h4 id="characters"><a name="characters" href="#characters"></a>Characters</h4><p>Typically represented with <strong>8 Bits</strong></p><p>Eg: <code>00001010</code> is <code>\n</code> in ASCII (use the linux command <code>man ascii</code> for a full table)</p><h2 id="hexadecimal"><a name="hexadecimal" href="#hexadecimal"></a>Hexadecimal</h2><p>In general, binary SUCKS to work with. Hexadecimal sucks less.</p><p>Essentially, we can represent numbers with 16 symbols, instead of just 1 and 0</p><p>We use the digits 0-9, A, B, C, D, E, and F.</p><p>A nice property of Hexadecimal is that it is easy to convert into Binary, and vice versa.<br>You just split the binary number into chunks of 4 bits, and then write the digit associated with each chunk.</p><p>Eg: <code>1010 1111 1001 1001</code> = <code>xAF99</code></p><h1 id="lecture-2"><a name="lecture-2" href="#lecture-2"></a>Lecture 2</h1><h2 id="grouping-of-bits"><a name="grouping-of-bits" href="#grouping-of-bits"></a>Grouping of Bits</h2><p>The most common grouping of bits is in a <strong>byte</strong>, or a group of <strong>8 bits</strong></p><p>There are <strong>256</strong> possible values that can be encoded by 8 bits. What to encode however, is up to interpretation (see above)</p><h2 id="files"><a name="files" href="#files"></a>Files</h2><p>Files are just long sequences of bytes, and it is up to a program to determine what the byte sequences actually mean.</p><p>The command <code>cat</code> for example, will interpret any file thrown at it as Text, and print out each byte as a ASCII char.</p><p>The command <code>xxd</code> on the other hand, will print the file’s bits as hexadecimal values (alongside an ascii interpretation of the bits)</p><p>So, for example, if there is a file <code>hasY</code> with string <code>Y\n</code>, then the output of <code>xxd</code> would be something like:</p><pre><code data-origin="<pre><code>#Addr     #Hex   #Ascii
00000000: 590a   Y.
</code></pre>">#Addr     #Hex   #Ascii
00000000: 590a   Y.
</code></pre><p><code>59</code> is the hex code for <code>Y</code> in ascii, and <code>0a</code> is the hex code for the Newline Char in ascii</p><h2 id="words"><a name="words" href="#words"></a>Words</h2><p>A <strong>Word</strong> is a grouping a bits that a specific CPU “likes” (i.e: can easily do math on, execute ops, etc…)</p><p>Words can be any number of bits… from <strong>8 bit</strong> in the 80s, all the way to <strong>64 bit</strong> nowadays.</p><p>NOTE: a CPU’s specific word-size will limit the total ammount of memory a CPU can ever see! For example, 32 bit CPUs could only address ~3.5gigs of memory, so until the switch to 64 bit CPUS, no matter how much RAM you shoved in a PC, if the OS was 32bit, it couldn’t see more than 3.5gigs</p><h2 id="our-machine"><a name="our-machine" href="#our-machine"></a>Our Machine</h2><p>The machine we are using in cs241 is a <strong>Stored Program Computer</strong></p><p>What this means is that the CPU is connected to the Memory (via a “mem bus”) not just to use the memory as a place to store data, but also as a place to store actual program code.</p><p>To run a program, the CPU calls the memory for an instruction, and the memory returns a string of bits that (should) correspond to a instruction that the CPU can execute.</p><h2 id="cpu"><a name="cpu" href="#cpu"></a>CPU</h2><p>CPUs are not actually just magic boxes. They have things within them that make them work…</p><p>There are several places to Store things</p><ul>
<li><strong>Program Counter (PC)</strong>- Where in memory to load new instructions from</li><li><strong>Instruction Register (IR)</strong>- Chunk of memory that holds the instruction to run</li><li><strong>Registers 0-31 (<span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-1-Frame" role="textbox" aria-readonly="true"><nobr><span class="math" id="MathJax-Span-1" style="width: 2.663em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.172em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.701em 1000em 2.647em -0.345em); top: -2.5em; left: 0em;"><span class="mrow" id="MathJax-Span-2"><span class="mn" id="MathJax-Span-3" style="font-family: STIXGeneral;">0</span><span class="mo" id="MathJax-Span-4" style="font-family: STIXGeneral;">−</span><span class="mo" id="MathJax-Span-5" style="font-family: STIXGeneral; padding-left: 0.313em;">&gt;</span></span><span style="display: inline-block; width: 0px; height: 2.5em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.954em; vertical-align: -0.079em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-1">0 -> </script>31)</strong> - “boxes” that can store words of information (think superfast ram)</li></ul><p>And there are other places that Do things</p><ul>
<li><strong>Control Unit</strong> - reads the PC, retrieves the instruction from memory, puts that instruction in the IR, and then executes the instruction</li><li><strong>Arithmetic Logic Unit (ALU)</strong> - Can do maths on given bits. Things like adding, subtracting, AND / OR / NOTs, etc…</li></ul><h2 id="memory-(ram)"><a name="memory-(ram)" href="#memory-(ram)"></a>Memory (RAM)</h2><p>RAM is really just a giant block of “boxes” that can store bytes, starting from 0 to denote the 1st byte, 4 to denote the 5th byte, etc…</p><p>On a MIPS machine, words are 4 bytes, and as such, when addressing the RAM to ask for instructions, we must ask for words, so we address RAM in increments of 4.</p><h2 id="mips"><a name="mips" href="#mips"></a>MIPS</h2><p>MIPS is a set of instructions that our processor understands. </p><p>In this course, there are <strong>18</strong> different <strong> 32-bit (4 byte)</strong> instructions encoded in 2 basic instruction formats.</p><p><strong>MIPS assembler</strong> is the <strong>Assembly Language</strong> that translates human-readable instructions into the actual 32-bit / 1 word instructions that the CPU can read.</p><p>For example:</p><ul>
<li><code>add $1, $2, $3</code> are <strong>MIPS instructions</strong> that correspond to…</li><li><code>0000 0000 0100 0011 0000 1000 0010 0000</code> when converted to <strong>Binary</strong>, or </li><li><code>0x00430820</code> when written in <strong>Hex</strong></li></ul><p>That binary actually means the following…</p><pre><code data-origin="<pre><code>000000      ; Call the ALU
00010       ; $2
00011       ; $3
00001       ; $1
00000100000 ; Add
</code></pre>">000000      ; Call the ALU
00010       ; $2
00011       ; $3
00001       ; $1
00000100000 ; Add
</code></pre><p>A full list of MIPS instructions can be found here: <a href="https://www.student.cs.uwaterloo.ca/~cs241/mips/mipsref.pdf">https://www.student.cs.uwaterloo.ca/~cs241/mips/mipsref.pdf</a></p><h2 id="loading-and-storing-values-to-/-from-ram"><a name="loading-and-storing-values-to-/-from-ram" href="#loading-and-storing-values-to-/-from-ram"></a>Loading and Storing values to / from RAM</h2><p>The instruction <code>lw</code> loads a word from memory, and <code>sw</code> stores a word to memory</p><p>Eg: <code>lw $7, 0($3)</code> will load the value at MEM[<span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-2-Frame" role="textbox" aria-readonly="true"><nobr><span class="math" id="MathJax-Span-6" style="width: 6.862em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.615em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.701em 1000em 2.829em -0.328em); top: -2.5em; left: 0em;"><span class="mrow" id="MathJax-Span-7"><span class="mn" id="MathJax-Span-8" style="font-family: STIXGeneral;">3</span><span class="mo" id="MathJax-Span-9" style="font-family: STIXGeneral;">]</span><span class="mi" id="MathJax-Span-10" style="font-family: STIXGeneral; font-style: italic;">i</span><span class="mi" id="MathJax-Span-11" style="font-family: STIXGeneral; font-style: italic;">n</span><span class="mi" id="MathJax-Span-12" style="font-family: STIXGeneral; font-style: italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.018em;"></span></span><span class="mi" id="MathJax-Span-13" style="font-family: STIXGeneral; font-style: italic;">o</span><span class="mi" id="MathJax-Span-14" style="font-family: STIXGeneral; font-style: italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.023em;"></span></span><span class="mi" id="MathJax-Span-15" style="font-family: STIXGeneral; font-style: italic;">e</span><span class="mi" id="MathJax-Span-16" style="font-family: STIXGeneral; font-style: italic;">g</span><span class="mi" id="MathJax-Span-17" style="font-family: STIXGeneral; font-style: italic;">i</span><span class="mi" id="MathJax-Span-18" style="font-family: STIXGeneral; font-style: italic;">s</span><span class="mi" id="MathJax-Span-19" style="font-family: STIXGeneral; font-style: italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.018em;"></span></span><span class="mi" id="MathJax-Span-20" style="font-family: STIXGeneral; font-style: italic;">e</span><span class="mi" id="MathJax-Span-21" style="font-family: STIXGeneral; font-style: italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.023em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.5em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.176em; vertical-align: -0.301em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-2">3] into register </script>7<br>Eg: <code>sw $8, 4($3)</code> will load the value from <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-3-Frame" role="textbox" aria-readonly="true"><nobr><span class="math" id="MathJax-Span-22" style="width: 4.912em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.016em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.701em 1000em 2.779em -0.313em); top: -2.5em; left: 0em;"><span class="mrow" id="MathJax-Span-23"><span class="mn" id="MathJax-Span-24" style="font-family: STIXGeneral;">8</span><span class="mi" id="MathJax-Span-25" style="font-family: STIXGeneral; font-style: italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.018em;"></span></span><span class="mi" id="MathJax-Span-26" style="font-family: STIXGeneral; font-style: italic;">o</span><span class="mi" id="MathJax-Span-27" style="font-family: STIXGeneral; font-style: italic;">M<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.039em;"></span></span><span class="mi" id="MathJax-Span-28" style="font-family: STIXGeneral; font-style: italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.023em;"></span></span><span class="mi" id="MathJax-Span-29" style="font-family: STIXGeneral; font-style: italic;">M<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.039em;"></span></span><span class="mo" id="MathJax-Span-30" style="font-family: STIXGeneral;">[</span></span><span style="display: inline-block; width: 0px; height: 2.5em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.115em; vertical-align: -0.24em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-3">8 to MEM[</script>3+4] (that +4 is needed since we store Words in memory, and Words are 4 bytes each)</p><h2 id="main-machine-cycle"><a name="main-machine-cycle" href="#main-machine-cycle"></a>Main Machine Cycle</h2><p>Every single clock cycle, the following happens:</p><p>1) Fetch a word from RAM whose address is in the PC (the PC is initialized to 0 on power-on)<br>2) Place that word in the IR<br>3) Increment the PC by 4<br>4) Decode and Execute the instruction that is in the IR</p><h1 id="lecture-3"><a name="lecture-3" href="#lecture-3"></a>Lecture 3</h1><h2 id="special-registers"><a name="special-registers" href="#special-registers"></a>Special Registers</h2><table>
<thead>
<tr>
<th>Register</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$0</code></td>
<td>Constant <strong>value 0</strong></td>
</tr>
<tr>
<td><code>$29 and $30</code></td>
<td><strong>Stack</strong> (see below…)</td>
</tr>
<tr>
<td><code>$31</code></td>
<td>The <strong>Return Address (RA)</strong></td>
</tr>
</tbody>
</table><h2 id="assembly-code"><a name="assembly-code" href="#assembly-code"></a>Assembly Code</h2><p>There is a 1 to 1 correspondance b/w Assembly Language and Machine Language. It translates human-friendlier mnemonic instructions like <code>add $3, $1, $2</code> to their related bit form. The <strong>Assembler</strong> is the program that does this automatic translation.</p><p>For some example of Assembly Code and the Machine Language equivilents, see the cs241 website.</p><h1 id="lecture-4"><a name="lecture-4" href="#lecture-4"></a>Lecture 4</h1><h2 id="labels"><a name="labels" href="#labels"></a>Labels</h2><p>Labels identify an address.</p><pre><code class="language" data-origin="<pre><code class=&quot;language&quot;>; some stuff

loop: add ...
; more instructions...
bne $2, $0, loop ;using label

X: Y: ; can have 2 labels on the same line
</code></pre>">; some stuff

loop: add ...
; more instructions...
bne $2, $0, loop ;using label

X: Y: ; can have 2 labels on the same line
</code></pre><h2 id="storing-and-restoring-registers"><a name="storing-and-restoring-registers" href="#storing-and-restoring-registers"></a>Storing and Restoring Registers</h2><p>What happens if we call a subroutine where it uses some registers, that you need! We only have $32 registers after all!</p><p>Consider this example below</p><pre><code data-origin="<pre><code>; Example 6a: Calling a procedure
sw $31, −4($30)        ; save $31 on stack
lis $31
.word 4
sub $30, $30, $31
lis $1                 ; call sumOneToN(13)
.word sumOneToN
lis $2
.word 13
jalr $1
lis $31                ; restore $31 from stack
.word 4
add $30, $30, $31
lw $31, −4($30)
jr $31                 ; return to OS

;------------------------

; Example 6b: A procedure
; sumOneToN: sum the integers from 1 to N
; input: $2 is N
; output: $3 is the sum

sumOneToN:
sw $1, −4($30)         ; save $1 on stack
sw $2, −8($30)         ; save $2 on stack
lis $1
.word 8
sub $30, $30, $1
add $3, $0, $0         ; clear $3
beginLoop:
add $3, $3, $2         ; add $2 to $3
lis $1                 ; decrement $2
.word −1
add $2, $2, $1
bne $2, $0, beginLoop
lis $1
.word 8
add $30, $30, $1
lw $1, −4($30)         ; restore $1 from stack
lw $2, −8($30)         ; restore $2 from stack
jr $31                 ; return from sumOneToN
</code></pre>">; Example 6a: Calling a procedure
sw $31, −4($30)        ; save $31 on stack
lis $31
.word 4
sub $30, $30, $31
lis $1                 ; call sumOneToN(13)
.word sumOneToN
lis $2
.word 13
jalr $1
lis $31                ; restore $31 from stack
.word 4
add $30, $30, $31
lw $31, −4($30)
jr $31                 ; return to OS

;------------------------

; Example 6b: A procedure
; sumOneToN: sum the integers from 1 to N
; input: $2 is N
; output: $3 is the sum

sumOneToN:
sw $1, −4($30)         ; save $1 on stack
sw $2, −8($30)         ; save $2 on stack
lis $1
.word 8
sub $30, $30, $1
add $3, $0, $0         ; clear $3
beginLoop:
add $3, $3, $2         ; add $2 to $3
lis $1                 ; decrement $2
.word −1
add $2, $2, $1
bne $2, $0, beginLoop
lis $1
.word 8
add $30, $30, $1
lw $1, −4($30)         ; restore $1 from stack
lw $2, −8($30)         ; restore $2 from stack
jr $31                 ; return from sumOneToN
</code></pre><p>In general, Stack usage rules are:</p><pre><code data-origin="<pre><code>sw
sw
...
sub $30, $30, 4.n
[body]
add $30, $30, 4.n
lw
lw
jr $31
</code></pre>">sw
sw
...
sub $30, $30, 4.n
[body]
add $30, $30, 4.n
lw
lw
jr $31
</code></pre><h2 id="recursion"><a name="recursion" href="#recursion"></a>Recursion</h2><p>Here is an example of recursion</p><pre><code class="assembly" data-origin="<pre><code class=&quot;Assembly&quot;>; Save $31 on the stack
sw $31, -4($30)
lis $31
.word 4
sub $30, $30, $31

; Call recSum(13)
lis $4
.word recSum
lis $1
.word 13
jalr $4

; Restore $31 from the stack
lis $31
.word 4
add $30, $30, $31
lw $31, -4($30)

; Return to OS
jr $31

;-----------------------

; recursively sum up the integers from 1 to N
; assume that input (N) is in $1
; output is returned in $3
recSum:
; Save registers on the stack
sw $1, -4($30)
sw $2, -8($30)
sw $4, -12($30)
sw $31, -16($30)
lis $4
.word 16
sub $30, $30, $4
; Initialize sum so far
add $3, $0, $0
; Check to see if we are in the base case (N=0)
beq $1, $0, done
; Otherwise, we must compute the sum of the current N
; and the sum of the rest
; keep a copy of the current value of N
add $2, $1, $0
; put N-1 into register $1
lis $4
.word 1
sub $1, $1, $4
; get ready to call routine (i.e., ourself)
lis $4
.word recSum
jalr $4
; add the value we got back to the current value of N (in $2)
add $3, $3, $2
done:
; restore registers
lis $4
.word 16
add $30, $30, $4
lw $1, -4($30)
lw $2, -8($30)
lw $4, -12($30)
lw $31, -16($30)
jr $31
</code></pre>">; Save $31 on the stack
sw $31, -4($30)
lis $31
.word 4
sub $30, $30, $31

; Call recSum(13)
lis $4
.word recSum
lis $1
.word 13
jalr $4

; Restore $31 from the stack
lis $31
.word 4
add $30, $30, $31
lw $31, -4($30)

; Return to OS
jr $31

;-----------------------

; recursively sum up the integers from 1 to N
; assume that input (N) is in $1
; output is returned in $3
recSum:
; Save registers on the stack
sw $1, -4($30)
sw $2, -8($30)
sw $4, -12($30)
sw $31, -16($30)
lis $4
.word 16
sub $30, $30, $4
; Initialize sum so far
add $3, $0, $0
; Check to see if we are in the base case (N=0)
beq $1, $0, done
; Otherwise, we must compute the sum of the current N
; and the sum of the rest
; keep a copy of the current value of N
add $2, $1, $0
; put N-1 into register $1
lis $4
.word 1
sub $1, $1, $4
; get ready to call routine (i.e., ourself)
lis $4
.word recSum
jalr $4
; add the value we got back to the current value of N (in $2)
add $3, $3, $2
done:
; restore registers
lis $4
.word 16
add $30, $30, $4
lw $1, -4($30)
lw $2, -8($30)
lw $4, -12($30)
lw $31, -16($30)
jr $31
</code></pre><p>In general, the template for recursion in MIPS is roughly:</p><ul>
<li>Save registers ($31 in particular)</li><li>Check base case</li><li>Recursive case:<ul>
<li>Compute next value</li><li>Call self</li><li>Compute return value</li></ul>
</li><li>Restore registers</li></ul><h1 id="lectures-5-and-6"><a name="lectures-5-and-6" href="#lectures-5-and-6"></a>Lectures 5 and 6</h1><h2 id="assembler-stages"><a name="assembler-stages" href="#assembler-stages"></a>Assembler Stages</h2><p>First pass = make an intermediate representation<br>Second pass = make actual ML code</p><h2 id="syntax-and-semantics"><a name="syntax-and-semantics" href="#syntax-and-semantics"></a>Syntax and Semantics</h2><p><strong>Syntax</strong> = form / structure (col 2 of MIPS ref sheet)<br>Asm lang syntax goes in, ML lang syntax comes out</p><p><strong>Semantics</strong> = “meaning” (col 3 of MIPS ref sheet)<br>What do instructions actually “do”</p><p><strong>Location</strong> and <strong>Labels</strong> (col 4 of MIPS ref sheet)<br>Location = “where I am”<br>Label = “where I want to be”</p><h2 id="first-pass---analysis"><a name="first-pass---analysis" href="#first-pass---analysis"></a>First Pass - Analysis</h2><p>Must generate<br>1) an intermediate representation<br>2) a symbol table</p><p>Tokenization (not neccesary, but probably the best intermediate representation</p><ul>
<li>A <strong>Tokenizer</strong> is a program that<ul>
<li>takes an <strong>Input</strong> of ASCII chars</li><li><strong>Outputs</strong> a sequence of Tokens</li><li>e.g: <code>add $3, $1, $7</code> =&gt; <code>&lt;ADD&gt;&lt;REG&gt;&lt;COMMA&gt;&lt;REG&gt;&lt;COMMA&gt;&lt;REG&gt;</code></li></ul>
</li></ul><h3 id="intermediate-representation-(ir)"><a name="intermediate-representation-(ir)" href="#intermediate-representation-(ir)"></a>Intermediate Representation (IR)</h3><p>There is no “hard and fast” rules for what a IR can be.<br>It can be anywhere from </p><ul>
<li>Just the raw ASCII minus comments</li><li>A series of tekens</li><li>Perliminary binary translation</li><li>Or really anywhere inbetween</li></ul><h3 id="symbol-table-(st)"><a name="symbol-table-(st)" href="#symbol-table-(st)"></a>Symbol Table (ST)</h3><p>Stores the address and the name of each label definition</p><p>The following code has the following Symbol table</p><pre><code data-origin="<pre><code>0x00 misery: beq $0, $7, happy
...
0x0C         beq $7, $12, misery
...
0x1C happy:  add $3, $3, $3
</code></pre>">0x00 misery: beq $0, $7, happy
...
0x0C         beq $7, $12, misery
...
0x1C happy:  add $3, $3, $3
</code></pre><table>
<thead>
<tr>
<th>name</th>
<th>address</th>
</tr>
</thead>
<tbody>
<tr>
<td>misery</td>
<td>0x00</td>
</tr>
<tr>
<td>happy</td>
<td>0x1c</td>
</tr>
</tbody>
</table><h2 id="second-pass---synthesis"><a name="second-pass---synthesis" href="#second-pass---synthesis"></a>Second Pass - Synthesis</h2><p>Takes the IR and ST, and combines them into valid machine code</p><h2 id="example:-encoding-a-beq-instruction"><a name="example:-encoding-a-beq-instruction" href="#example:-encoding-a-beq-instruction"></a>Example: Encoding a beq instruction</h2><p>Given <code>0x0C beq $7, $12, misery</code>, and that <code>misery</code> is at <code>0x00</code></p><p>from the MIPS reference sheet, we know <code>beq</code> has format <code>0001 00ss ssst tttt iiii iiii iiii iiii</code>, where i is an <strong>Offset</strong> from the current PC!</p><p>Thus, we must encode those <code>i</code>‘s to have a value of <code>-16</code>, to move the PC back to 16</p><h2 id="advice-for-making-an-assembler"><a name="advice-for-making-an-assembler" href="#advice-for-making-an-assembler"></a>Advice for making an assembler</h2><p>Look for patterns!</p><p>For example: ADD and SUB have instructions that are almost the same! They only differ by 1 bit!</p><p>There are plenty of these, so don’t forget to write DRY code</p><h2 id="efficieny-of-the-symbol-table"><a name="efficieny-of-the-symbol-table" href="#efficieny-of-the-symbol-table"></a>Efficieny of the Symbol Table</h2><p>For large programs, there will be a huge symbol table, and there must be a way to have quick and efficient access to it.</p><p>Symbol Tables are just (key, val) pairs, with the key being the label string, and the value being an integer representing the address of the label</p><p>So, TL;DR, use a Hash Map / Dictionary</p><ul>
<li>Supports quick insert (Pass 1)</li><li>Supports quick remove (not that we will be doing any removes)</li><li>Supports quick finds (Pass 2 AND Pass 1 - Check for same label, 2 addr)</li></ul><h2 id="error-checking-in-pass-1"><a name="error-checking-in-pass-1" href="#error-checking-in-pass-1"></a>Error Checking in Pass 1</h2><p>Check for Duplicate Label Definitions (i.e: same label for 2 different addresses)</p><p>Check for Label Syntax</p><ul>
<li>Must start with an alphabetic char (so 123fred: is bad, $54: is bad)</li><li>Must have only alphanumeric chars</li></ul><p>Check basic Syntax</p><ul>
<li>Eg: <code>asddsa fgdfg ,,;</code> is invalid</li></ul><h2 id="error-checking-in-pass-2"><a name="error-checking-in-pass-2" href="#error-checking-in-pass-2"></a>Error Checking in Pass 2</h2><p>Consider <code>beq $3, $4, notALabel</code></p><p>We can’t jsut throw this instruction out in Pass 1, as notALabel might be defined later. Only in Pass 2 can we throw a “label undefined” error<br>This is a <em>Semantic</em> Error</p><p>Consider <code>lw $3 4($30)</code></p><p>This will throw a <em>Syntax</em> error</p><p>Consider <code>lw $3, 4($30</code><br>Consider <code>lw lw $3, 4($30)</code></p><p>These will all throw <em>Syntax</em> error</p><p>Consider <code>lv $3, 4($30)</code></p><p>This will thow either a “invalid instruction” error, or a “Syntax error”</p><p>Consider <code>lw $3, 4($32)</code></p><p>This will throw a <em>Semantic</em> error, since register $32 doesn’t exist</p><p>Consider <code>lw $3, 44444444444444($30)</code></p><p>This will throw a <em>Semantic</em> error, since that number is out of the 16 bit bound, and can’t be encoded in the instruction</p><p>Consider <code>$3, 5($30)</code></p><p>This might throw a <em>Semantic</em> error, since 5 is not a multiple of 4 (but i might not, if the multiplication between $30 and 5 is actuall a multiple of 4)</p><h2 id="error-checking-philosophy"><a name="error-checking-philosophy" href="#error-checking-philosophy"></a>Error Checking Philosophy</h2><h3 id="accept-valid-instructions,-reject-everything-else."><a name="accept-valid-instructions,-reject-everything-else." href="#accept-valid-instructions,-reject-everything-else."></a>Accept valid instructions, reject everything else.</h3><p>Easier to check validity of instruction, than the invalidity of the instructions.</p><h2 id="a-note-on-what-the-assembler-will-output"><a name="a-note-on-what-the-assembler-will-output" href="#a-note-on-what-the-assembler-will-output"></a>A note on what the Assembler will output</h2><p>The assembeler we write will <strong>output literal bits, NOT ASCII chars!!</strong></p><p>That means that the assembler will make heavy use of the bitwise operators, like <code>&amp;, |, &lt;&lt;, &gt;&gt;</code>, etc…</p><p>Output is still to STDOUT, but use <code>putchar</code></p><h2 id="a-gift"><a name="a-gift" href="#a-gift"></a>A Gift</h2><p>On the Assignment 3/4 page, you can download <code>asm.c / asm.cc / asm.rkt</code>, that will provide a significant ammount of helpful boilerplate code to jumpstart your assembler development.</p><h2 id="how-to-write-an-assembler"><a name="how-to-write-an-assembler" href="#how-to-write-an-assembler"></a>How to Write an Assembler</h2><p>Slowly.</p><p>With a lot of tests.<br>Like, a LOT of tests.<br>Like a SHITTON of tests.<br>Like an UNREASONABLE AMMOUT of tests.</p><p>Test your assembler against cs241.binasm.</p><h2 id="correctness"><a name="correctness" href="#correctness"></a>Correctness</h2><ul>
<li>Read the spec carefully, or, RTFM</li><li>Think reasonably, and unreasonably</li><li>Remember memory: O(n)</li><li>Running times DO matter: O(n)</li><li><em>Dont’t use Marmoset as your only testing tool!</em></li></ul><h1 id="lecture-7"><a name="lecture-7" href="#lecture-7"></a>Lecture 7</h1><h2 id="loaders"><a name="loaders" href="#loaders"></a>Loaders</h2><p>Generally, we don’t run our programs by loading them at addr. 0. Usually, we have an OS loaded before us that then<br>a) delegates RAM to programs,<br>b) copies those programs to that point in ram,<br>c) executes them.</p><p>In pseudocode, the loader does the following:</p><pre><code data-origin="<pre><code>loop
 decide what program to run
 figure out the length of the program (n)
 find n words of storage at some address (a)
 read program into memory at a
 set up program (e.g: mipstwoints)
 put a into a register (say $19)
 jalr $19
end loop
</code></pre>">loop
 decide what program to run
 figure out the length of the program (n)
 find n words of storage at some address (a)
 read program into memory at a
 set up program (e.g: mipstwoints)
 put a into a register (say $19)
 jalr $19
end loop
</code></pre><h2 id="chickens-and-eggs"><a name="chickens-and-eggs" href="#chickens-and-eggs"></a>Chickens and Eggs</h2><p>To get the size of the program we want to load, we actually have to store the size of our program with our program (this is because of the chicken and egg problem of having to load a program into RAM to find it’s size, but we need it’s size to load it into RAM)</p><p>Another issue is that the loader itself is a program, so who loads the loader?<br>Well, a Microloader loads the loader.<br>Who loads the Microloader?<br>The Firmware / BIOS</p><p>It’s turtles all the way down.</p><p>(this is called Bootstrapping)</p><h3 id="note"><a name="note" href="#note"></a>NOTE</h3><p>I missed the next bit of the lecture, so get ready for some pretty disjointed notes.</p><h2 id="merl-format"><a name="merl-format" href="#merl-format"></a>MERL Format</h2><p>Header cookie (1 word: <code>beq $0, $0, 2 (0x10000002)</code>)<br>Length of the .merl file (1 word)<br>Length of program + header (1 word)<br>Program code (A3 + A4)<br>Notes of what to change (Relocation entries: <code>.word 1</code> <code>.word &lt;loc&gt;</code>)<br>- i.e: which registers link to other registers that would have to have a mem-offset added to them</p><p>See full description on the CS241 website</p><h2 id="a-merl-assembler-(for-a5)"><a name="a-merl-assembler-(for-a5)" href="#a-merl-assembler-(for-a5)"></a>A MERL Assembler (for A5)</h2><ul>
<li>Pass 1 changes<ul>
<li>Start counting at 0xc to account for the 3 word MERL header</li><li>If you see a <code>.word &lt;label&gt;</code> instruction, write down it’s location in the relocation table</li></ul>
</li><li>Pass 2 changes<ul>
<li>Output the header (the coockie, the size of the .merl file, the size of the program + header)</li><li>Output notes:<ul>
<li>Relocation table entries</li></ul>
</li></ul>
</li></ul><h2 id="relocating-loader-pseudocode"><a name="relocating-loader-pseudocode" href="#relocating-loader-pseudocode"></a>Relocating Loader Pseudocode</h2><pre><code data-origin="<pre><code>read header
a = findFreeRAM(codeLength)
for each instruction:
    MEM[a + i] = instruction
for each relocation entry
    MEM[a + location] += a
place a into $19
jalr $19
</code></pre>">read header
a = findFreeRAM(codeLength)
for each instruction:
    MEM[a + i] = instruction
for each relocation entry
    MEM[a + location] += a
place a into $19
jalr $19
</code></pre>

<footer style="position:fixed; font-size:.8em; text-align:right; bottom:0px; margin-left:-25px; height:20px; width:100%;">generated by <a href="http://pad.haroopress.com" target="_blank">haroopad</a></footer>
</body>
</html>
